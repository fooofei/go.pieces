package main

import (
    "encoding/json"
    "log"
)

func TestCltMsg() {

    var err error

    addTerm := `{
        "statistic": [
            {
                "keyId": "6ba724d5313044949eef7d25fae42b52",
                "onlineSdkCount ": 1,
                "inPayloadLength": 0,
                "outPayloadLength": 0,
                "decreaseSdkInfo": [],
                "increaseSdkInfo": [
                    {
                        "sdkUuid": "1234567890abcdef1234567890abcdefffff",
                        "srcIp": [
                            "10.177.96.185"
                        ]
                    }
                ]
            }
        ],
        "wkrIdx": 0,
        "rsn": "addTerm"
    }`

    subTerm := `{
        "statistic": [
            {
                "keyId": "6ba724d5313044949eef7d25fae42b52",
                "onlineSdkCount ": 0,
                "inPayloadLength": 0,
                "outPayloadLength": 0,
                "decreaseSdkInfo": [  {
                        "sdkUuid": "1234567890abcdef1234567890abcdefffff"
                        
                    }],
                "increaseSdkInfo": [
                  
                ]
            }
        ],
        "wkrIdx": 0,
        "rsn": "subTerm"
    }`

    addJ := make(map[string]interface{})
    err = json.Unmarshal([]byte(addTerm), &addJ)
    if err != nil {
        log.Fatal(err)
    }
    subJ := make(map[string]interface{})
    err = json.Unmarshal([]byte(subTerm), &subJ)
    if err != nil {
        log.Fatal(err)
    }

    stats, ok := addJ["statistic"].([]interface{})
    if ok {
        for idx := range stats {
            log.Printf("%v", stats[idx])
        }

    }

    //app_stat := make(map[string]interface{})

    //log.Printf("%v", addJ)
    //log.Printf("%v", subJ)
}

func main() {
    TestCltMsg()
}
